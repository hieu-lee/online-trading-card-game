(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3922:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>e_});var r=a(5155),s=a(2115),n=a(2085),l=a(2596),i=a(9688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,l.$)(t))}let c=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{"data-slot":"alert",role:"alert",className:o(c({variant:a}),t),...s})}function u(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert-description",className:o("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}var m=a(1888),h=a(1436),x=a(6193),g=a(1976),f=a(9708);let p=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function v(e){let{className:t,variant:a,size:s,asChild:n=!1,...l}=e,i=n?f.DX:"button";return(0,r.jsx)(i,{"data-slot":"button",className:o(p({variant:a,size:s,className:t})),...l})}function b(e){let{className:t,type:a,...s}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:o("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}var j=a(606),N=a(4416);function _(e){let{...t}=e;return(0,r.jsx)(j.bL,{"data-slot":"dialog",...t})}function k(e){let{...t}=e;return(0,r.jsx)(j.ZL,{"data-slot":"dialog-portal",...t})}function y(e){let{className:t,...a}=e;return(0,r.jsx)(j.hJ,{"data-slot":"dialog-overlay",className:o("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function w(e){let{className:t,children:a,showCloseButton:s=!0,...n}=e;return(0,r.jsxs)(k,{"data-slot":"dialog-portal",children:[(0,r.jsx)(y,{}),(0,r.jsxs)(j.UC,{"data-slot":"dialog-content",className:o("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[a,s&&(0,r.jsxs)(j.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(N.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function S(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-header",className:o("flex flex-col gap-2 text-center sm:text-left",t),...a})}function E(e){let{className:t,...a}=e;return(0,r.jsx)(j.hE,{"data-slot":"dialog-title",className:o("text-lg leading-none font-semibold",t),...a})}function A(e){let{isOpen:t,onSubmit:a,error:n,isConnecting:l}=e,[i,o]=(0,s.useState)("");return(0,r.jsx)(_,{open:t,children:(0,r.jsxs)(w,{className:"bg-slate-800 border-green-400/20 text-white [&>button]:hidden",children:[(0,r.jsx)(S,{children:(0,r.jsx)(E,{className:"text-green-400 text-center",children:"Join Online Card Game"})}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i.trim()&&a(i.trim())},className:"space-y-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(b,{value:i,onChange:e=>o(e.target.value),placeholder:"Enter your username",className:"bg-slate-700 border-green-400/20 text-white placeholder:text-gray-400",disabled:l,autoFocus:!0})}),n&&(0,r.jsx)(d,{className:"border-red-400/20 bg-red-900/20",children:(0,r.jsx)(u,{className:"text-red-400",children:n})}),(0,r.jsx)(v,{type:"submit",disabled:!i.trim()||l,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:l?"Connecting...":"Join Game"})]})]})})}function C(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:o("bg-card text-card-foreground flex flex-col gap-2 rounded-xl border py-6 shadow-sm",t),...a})}function R(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:o("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function T(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:o("leading-none font-semibold",t),...a})}function D(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:o("px-6",t),...a})}var L=a(6380),O=a(6474);function F(e){let{...t}=e;return(0,r.jsx)(L.bL,{"data-slot":"accordion",...t})}function U(e){let{className:t,...a}=e;return(0,r.jsx)(L.q7,{"data-slot":"accordion-item",className:o("border-b last:border-b-0",t),...a})}function P(e){let{className:t,children:a,...s}=e;return(0,r.jsx)(L.Y9,{className:"flex",children:(0,r.jsxs)(L.l9,{"data-slot":"accordion-trigger",className:o("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-0  text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...s,children:[a,(0,r.jsx)(O.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function W(e){let{className:t,children:a,...s}=e;return(0,r.jsx)(L.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...s,children:(0,r.jsx)("div",{className:o(t),children:a})})}function I(e){let{suggestions:t,visible:a,selectedIndex:s,onSelect:n}=e;return a&&0!==t.length?(0,r.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-700 border border-green-400/20 rounded-md shadow-lg z-50 max-h-60 overflow-y-auto",children:t.map((e,t)=>(0,r.jsxs)("div",{ref:t===s?e=>null==e?void 0:e.scrollIntoView({block:"nearest"}):void 0,className:"px-3 py-2 cursor-pointer border-b border-slate-600 last:border-b-0 ".concat(t===s?"bg-slate-600":"hover:bg-slate-600"),onMouseDown:t=>{t.preventDefault(),n(e)},children:[(0,r.jsx)("div",{className:"text-white font-medium",children:e.value}),e.description&&(0,r.jsx)("div",{className:"text-gray-400 text-sm",children:e.description})]},t))}):null}let G={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",j:"jack",jack:"jack",q:"queen",queen:"queen",k:"king",king:"king",a:"ace",ace:"ace"};function H(e){return G[e.toLowerCase().replace(/s$/,"")]}function B(e){let t=e.trim().toLowerCase();if(!t)return null;t.startsWith("call ")&&(t=t.slice(5));let a=t.split(/\s+/);if(0===a.length)return null;if(1===a.length)return"high card ".concat(H(a[0]));if(["2","3","4"].includes(a[0])){if(2===a.length){let e=H(a[1]);if(!e)return null;switch(a[0]){case"2":return"pair of ".concat(e);case"3":return"three of a kind ".concat(e);case"4":return"four of a kind ".concat(e)}}if(4===a.length&&"2"===a[0]&&"2"===a[2]){let e=H(a[1]),t=H(a[3]);if(e&&t&&e!==t)return"two pairs ".concat(e," and ").concat(t)}if(4===a.length&&("2"===a[0]&&"3"===a[2]||"3"===a[0]&&"2"===a[2])){let e="2"===a[0]?H(a[1]):H(a[3]),t="3"===a[0]?H(a[1]):H(a[3]);if(e&&t&&e!==t)return"full house: 3 ".concat(t," and 2 ").concat(e)}}let r=t.match(/^straight\s+(\w+)$/);if(r){let e=H(r[1]);if(e)return"straight from ".concat(e)}let s=t.match(/^(pair of|pair)\s+(\w+)/);if(s){let e=H(s[2]);if(e)return"pair of ".concat(e)}let n=t.match(/^(three of a kind|3 of a kind|three of|triple)\s+(\w+)/);if(n){let e=H(n[2]);if(e)return"three of a kind ".concat(e)}let l=t.match(/^(four of a kind|4 of a kind|four of|quad)\s+(\w+)/);if(l){let e=H(l[2]);if(e)return"four of a kind ".concat(e)}return["high card","pair","two pairs","three of a kind","straight","flush","full house","four of a kind","straight flush","royal flush"].some(e=>t.startsWith(e))?t:null}let M=["high card","pair of","two pairs","three of a kind","straight from","flush","royal flush"],K=[{command:"/high",description:"High Card",parameters:["rank"],template:"High Card {rank}"},{command:"/pair",description:"Pair of cards",parameters:["rank"],template:"Pair of {rank}"},{command:"/twopair",description:"Two Pairs",parameters:["rank1","rank2"],template:"Two Pairs {rank1} and {rank2}"},{command:"/three",description:"Three of a Kind",parameters:["rank"],template:"Three of a Kind {rank}"},{command:"/straight",description:"Straight",parameters:["rank"],template:"Straight from {rank}"},{command:"/flush",description:"Flush",parameters:["suit","rank1","rank2","rank3","rank4","rank5"],template:"Flush of {suit}: {rank1},{rank2},{rank3},{rank4},{rank5}"},{command:"/fullhouse",description:"Full House",parameters:["rank1","rank2"],template:"Full House: 3 {rank1} and 2 {rank2}"},{command:"/four",description:"Four of a Kind",parameters:["rank"],template:"Four of a Kind {rank}"},{command:"/straightflush",description:"Straight Flush",parameters:["suit","rank"],template:"Straight Flush {suit} from {rank}"},{command:"/royal",description:"Royal Flush",parameters:["suit"],template:"Royal Flush {suit}"}],z=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],J=["hearts","diamonds","clubs","spades"];function Y(e){let{onCallHand:t,onCallBluff:a,isYourTurn:n,currentCall:l}=e,i=(0,s.useRef)(null),{handSpec:o,setHandSpec:c,showSuggestions:d,suggestions:u,selectedSuggestion:m,currentCommand:h,parameterIndex:x,handleInputChange:g,handleKeyDown:f,applySuggestion:p,translateShorthandToSpec:j}=function(e){let[t,a]=(0,s.useState)(""),[r,n]=(0,s.useState)(!1),[l,i]=(0,s.useState)([]),[o,c]=(0,s.useState)(0),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(0),x=(e,t)=>{let a=e.template;return e.parameters.forEach((e,r)=>{t[r]&&(a=a.replace("{".concat(e,"}"),t[r]))}),a},g=e=>{if(!e.startsWith("/")){n(!1),u(null),h(0);return}let t=e.split(" "),a=t[0];if(1===t.length){let e=K.filter(e=>e.command.startsWith(a.toLowerCase()));i(e.map(e=>({type:"command",value:e.command,description:e.description,command:e}))),n(e.length>0),u(null),h(0)}else{let e=K.find(e=>e.command===a.toLowerCase());if(e){u(e);let a=t.length-2;if(h(a),a<e.parameters.length){let r=e.parameters[a],s=t[t.length-1]||"",l=[];r.includes("rank")?l=z.filter(e=>e.toLowerCase().startsWith(s.toLowerCase())):r.includes("suit")&&(l=J.filter(e=>e.toLowerCase().startsWith(s.toLowerCase()))),i(l.map(e=>({type:"parameter",value:e,paramType:r}))),n(l.length>0)}else n(!1)}else n(!1),u(null),h(0)}c(0)},f=r=>{if("command"===r.type){let t=r.value+" ";a(t),u(r.command),h(0),n(!1),setTimeout(()=>{var a;g(t),null==(a=e.current)||a.focus()},50)}else if("parameter"===r.type){let e=t.split(" ");e[e.length-1]=r.value;let s=e.join(" ");if(d&&m+1<d.parameters.length){let e=s+" ";a(e),n(!1),setTimeout(()=>g(e),50)}else d&&(a(x(d,e.slice(1))),n(!1),u(null),h(0))}};return(0,s.useEffect)(()=>{let t=t=>{e.current&&!e.current.contains(t.target)&&n(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[e]),{handSpec:t,setHandSpec:a,showSuggestions:r,suggestions:l,selectedSuggestion:o,currentCommand:d,parameterIndex:m,handleKeyDown:e=>{if(r&&l.length>0)if("ArrowDown"===e.key)e.preventDefault(),c(e=>(e+1)%l.length);else if("ArrowUp"===e.key)e.preventDefault(),c(e=>(e-1+l.length)%l.length);else if("Tab"===e.key||"Enter"===e.key){e.preventDefault(),f(l[o]);return}else"Escape"===e.key&&n(!1);if("Tab"===e.key&&!r){e.preventDefault();let r=t.trim().toLowerCase();if(!r)return;let s=M.filter(e=>e.startsWith(r));s.length>0&&a(s[0])}},handleInputChange:e=>{let t=e.target.value;a(t),g(t)},applySuggestion:f,translateShorthandToSpec:B}}(i),N=e=>{var a;e.preventDefault();let r=o.trim();!r||r.startsWith("/")||(t(null!=(a=j(r))?a:r),c(""))};return n?(0,r.jsx)(C,{className:"bg-slate-800 border-green-400/20",children:(0,r.jsx)(D,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"text-green-400 font-semibold",children:"Your Turn!"}),l&&(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:["Current call: ",l]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(b,{ref:i,value:o,onChange:g,onKeyDown:f,onKeyPress:e=>{"Enter"!==e.key||d||o.startsWith("/")||N(e)},placeholder:"Type / for commands or enter hand manually...",className:"bg-slate-700 border-green-400/20 text-white placeholder:text-gray-500",autoComplete:"off"}),(0,r.jsx)(I,{suggestions:u,visible:d,selectedIndex:m,onSelect:p})]}),(0,r.jsx)(v,{onClick:e=>N(e),disabled:!o.trim()||o.startsWith("/"),className:"bg-blue-500 hover:bg-blue-700",children:"Call"})]}),h&&(0,r.jsxs)("div",{className:"mt-2 p-2 bg-slate-700 rounded text-sm",children:[(0,r.jsx)("div",{className:"text-green-400 font-medium",children:h.description}),(0,r.jsxs)("div",{className:"text-gray-300",children:["Parameters:"," ",h.parameters.map((e,t)=>(0,r.jsxs)("span",{className:t===x?"text-yellow-400 font-bold":"text-gray-400",children:[e,t<h.parameters.length-1?", ":""]},e))]}),(0,r.jsxs)("div",{className:"text-gray-400 text-xs mt-1",children:["Preview: ",h.template]})]})]}),l&&(0,r.jsx)(v,{onClick:()=>a(),variant:"destructive",className:"w-full",children:"Call Bluff"}),(0,r.jsxs)(F,{type:"single",collapsible:!0,className:"text-sm text-gray-400",children:[(0,r.jsxs)(U,{value:"commands",children:[(0,r.jsx)(P,{children:"Slash Commands"}),(0,r.jsxs)(W,{children:[K.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-blue-400 font-mono",children:e.command}),(0,r.jsx)("span",{className:"text-gray-300",children:e.description})]},e.command)),(0,r.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"Type / to see available commands, use Tab or Enter to select"})]})]}),(0,r.jsxs)(U,{value:"shortcuts",children:[(0,r.jsx)(P,{children:"Shortcuts"}),(0,r.jsxs)(W,{children:[(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:"------"})}),(0,r.jsxs)("ul",{className:"space-y-1",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[rank]"})," - for high card hands"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"2 [rank]"}),' - for pairs (e.g., "2 kings", "2 j", "2 3")']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"3 [rank]"}),' - for three of a kind (e.g., "3 j", "3 10")']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"straight [rank]"}),' - for straights starting [rank] (e.g., "straight 10")']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"2 [rank1] 2 [rank2]"}),' - for two pairs (e.g., "2 3 2 4", "2 k 2 a")']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"2 [rank1] 3 [rank2]"})," or ",(0,r.jsx)("strong",{children:"3 [rank1] 2 [rank2]"}),' - for full house (e.g., "2 k 3 aces", "3 j 2 10")']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"4 [rank]"}),' - for four of a kind (e.g., "4 aces", "4 k", "4 7")']})]})]})]}),(0,r.jsxs)(U,{value:"hands",children:[(0,r.jsx)(P,{children:"Manual Hand Entry"}),(0,r.jsxs)(W,{children:[(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:"------"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"High Card"})," <rank>"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Pair of"})," <rank>"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Two Pairs"})," <rank1> and <rank2>"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Three of a Kind "}),"<rank>"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Straight from"})," <rank>"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Flush of"})," <suit>: <rank1>,<rank2>,<rank3>,<rank4>,<rank5>"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Full House: 3"})," <rank1> and 2 <rank2>"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Four of a Kind "}),"<rank>"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Straight Flush"})," <suit> from <rank>"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Royal Flush"})," <suit>"]})]})]})]})]})})}):(0,r.jsx)(C,{className:"bg-slate-800 border-green-400/20",children:(0,r.jsx)(D,{children:(0,r.jsx)("div",{className:"text-center text-gray-400",children:l?"Current call: ".concat(l):"Waiting for your turn..."})})})}var q=function(e){return e.USER_JOIN="user_join",e.USERNAME_ERROR="username_error",e.GAME_STATE_UPDATE="game_state_update",e.PLAYER_UPDATE="player_update",e.GAME_START="game_start",e.GAME_RESTART="game_restart",e.HOST_CHANGED="host_changed",e.USER_KICKED="user_kicked",e.USER_LEAVE="user_leave",e.WAITING_FOR_GAME="waiting_for_game",e.ROUND_START="round_start",e.ROUND_END="round_end",e.SHOW_CARDS="show_cards",e.CALL_BLUFF="call_bluff",e.CALL_HAND="call_hand",e.KICK_USER="kick_user",e.ADD_BOT="add_bot",e.REMOVE_BOT="remove_bot",e.ERROR="error",e}({});let V=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function $(e){let{className:t,variant:a,asChild:s=!1,...n}=e,l=s?f.DX:"span";return(0,r.jsx)(l,{"data-slot":"badge",className:o(V({variant:a}),t),...n})}var Q=a(7951),X=a(6517),Z=a(4449);function ee(e){let{username:t,isHost:a,isConnected:s,gamePhase:n}=e;return(0,r.jsx)(C,{className:"bg-slate-800 border-green-400/20",children:(0,r.jsx)(D,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-green-300",children:"Username:"}),(0,r.jsx)("span",{className:"text-white",children:t}),a&&(0,r.jsxs)($,{variant:"outline",className:"text-yellow-400 border-yellow-400/50",children:[(0,r.jsx)(Q.A,{className:"h-3 w-3 mr-1"}),"HOST"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-green-300",children:"Connected:"}),s?(0,r.jsxs)($,{className:"bg-green-600",children:[(0,r.jsx)(X.A,{className:"h-3 w-3 mr-1"}),"Yes"]}):(0,r.jsxs)($,{variant:"destructive",children:[(0,r.jsx)(Z.A,{className:"h-3 w-3 mr-1"}),"No"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-green-300",children:"Game Phase:"}),(0,r.jsx)($,{variant:"outline",className:"text-blue-400 border-blue-400/50",children:(null==n?void 0:n.replace("_"," ").toUpperCase())||"WAITING"})]})]})})})}var et=a(6766);let ea=e=>({"♥":"hearts","♦":"diamonds","♣":"clubs","♠":"spades",hearts:"hearts",diamonds:"diamonds",clubs:"clubs",spades:"spades"})[e]||e.toLowerCase(),er=e=>({11:"jack",12:"queen",13:"king",14:"ace"})[e]||e.toString(),es=[{top:"-8%",left:"50%",transform:"translate(-50%, 0)"},{top:"10%",left:"85%",transform:"translate(-50%, -50%)"},{top:"50%",left:"100%",transform:"translate(-100%, -50%)"},{top:"90%",left:"85%",transform:"translate(-50%, -50%)"},{top:"108%",left:"50%",transform:"translate(-50%, -100%)"},{top:"90%",left:"15%",transform:"translate(-50%, -50%)"},{top:"50%",left:"0%",transform:"translate(0, -50%)"},{top:"10%",left:"15%",transform:"translate(-50%, -50%)"}];function en(e){let{players:t,currentRoundHands:a,previousRoundHands:n,playerLastCalls:l,gamePhase:i,currentPlayerId:o,currentUserId:c,yourCards:d,isHost:u,botIds:m,onKickPlayer:h}=e,x=function(){let[e,t]=s.useState(void 0);return s.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)},[]),!!e}(),[g,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(Object.values(n).some(e=>Array.isArray(e)&&e.length>0)){f(!0);let e=setTimeout(()=>{f(!1)},5e3);return()=>clearTimeout(e)}},[n]);let p=e=>{let{card:t,variant:a,idx:n}=e,[l,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=setTimeout(()=>i(!0),20);return()=>clearTimeout(e)},[]);let o=ea(t.suit),c=er(t.rank),d="".concat(o,"_").concat(c,".svg");return(0,r.jsx)("div",{className:"flip-card relative ".concat({large:"w-12 h-18 sm:w-16 sm:h-24 md:w-20 md:h-28",small:"w-10 h-16 sm:w-12 sm:h-18 md:w-14 md:h-20"}[a]," ").concat(0===n?"":({large:"-ml-6 sm:-ml-8 md:-ml-10",small:"-ml-4 sm:-ml-5 md:-ml-6"})[a]),children:(0,r.jsxs)("div",{className:"flip-card-inner w-full h-full ".concat(l?"flipped":""),children:[(0,r.jsx)(et.default,{src:"cards/back_card.svg",alt:"Back of card",fill:!0,className:"flip-card-front object-contain"}),(0,r.jsx)(et.default,{src:"cards/".concat(d),alt:"".concat(c," of ").concat(o),fill:!0,className:"flip-card-back object-contain"})]})})};if(!(null==t?void 0:t.length))return null;let v=Array.from({length:8}).map((e,a)=>{var r;return null!=(r=t[a])?r:null}),b=(e,t,a,s)=>(0,r.jsx)("div",{className:"relative ".concat({large:"w-12 h-18 sm:w-16 sm:h-24 md:w-20 md:h-28",small:"w-10 h-16 sm:w-12 sm:h-18 md:w-14 md:h-20"}[a]," ").concat(0===s?"":({large:"-ml-6 sm:-ml-8 md:-ml-10",small:"-ml-4 sm:-ml-5 md:-ml-6"})[a]),children:(0,r.jsx)(et.default,{src:e,alt:t,fill:!0,className:"object-contain"})},s),j=e=>{let{player:t,borderColor:a,isBot:s}=e,n=u&&t.user_id!==c&&!s;return(0,r.jsxs)("div",{className:"relative px-2 py-1 rounded-md bg-slate-800 text-white text-sm border-2 flex items-center justify-center ".concat(a),children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[s&&(0,r.jsx)("span",{role:"img","aria-label":"Bot",title:"AI controlled player",children:"\uD83E\uDD16"}),t.username]}),n&&(0,r.jsx)("button",{onClick:()=>h(t.username),className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white rounded-full p-0.5",title:"Kick player",children:(0,r.jsx)(N.A,{className:"h-3 w-3"})})]})};return(0,r.jsxs)(C,{className:"bg-slate-800 border-green-400/20",children:[(0,r.jsx)(R,{children:(0,r.jsx)(T,{className:"text-green-400 text-lg",children:"Players"})}),(0,r.jsx)(D,{children:x?(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:t.map(e=>{if(!e)return null;let t="playing"===i&&e.user_id===o,l=e.is_eliminated,u=m.has(e.user_id),h=a[e.user_id],x=n[e.user_id],f=h&&h.length>0,v=e.user_id===c;return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(j,{player:e,borderColor:l?"border-red-600":t?"border-green-500":"border-gray-600",isBot:u}),(0,r.jsx)("div",{className:"flex items-center",children:!l&&(0,r.jsx)(r.Fragment,{children:f?h.map((e,t)=>{let a=ea(e.suit),r=er(e.rank),s="".concat(a,"_").concat(r,".svg");return b("cards/".concat(s),"".concat(r," of ").concat(a),"small",t)}):g&&x&&x.length>0?v?x.map((e,t)=>{let a=ea(e.suit),r=er(e.rank),s="".concat(a,"_").concat(r,".svg");return b("cards/".concat(s),"".concat(r," of ").concat(a),"small",t)}):x.map((e,t)=>(0,r.jsx)(p,{card:e,variant:"small",idx:t},t)):v?d.map((e,t)=>{let a=ea(e.suit),r=er(e.rank),s="".concat(a,"_").concat(r,".svg");return b("cards/".concat(s),"".concat(r," of ").concat(a),"small",t)}):[...Array(e.card_count)].map((e,t)=>b("cards/back_card.svg","Face down card","small",t))})})]},e.user_id)})}):(0,r.jsxs)("div",{className:"relative w-full max-w-lg mx-auto mt-4 aspect-square select-none",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded-full bg-green-800 border-8 border-green-900 shadow-inner"}),v.map((e,t)=>{var s;let u=es[t];if(!e)return null;let h="playing"===i&&e.user_id===o,x=e.is_eliminated,f=m.has(e.user_id),v=a[e.user_id],N=n[e.user_id],_=v&&v.length>0,k=e.user_id===c;return(0,r.jsxs)("div",{className:"absolute flex flex-col items-center",style:{top:u.top,left:u.left,transform:u.transform},children:[(0,r.jsx)(j,{player:e,borderColor:x?"border-red-600":h?"border-green-500":"border-gray-600",isBot:f}),!x&&(0,r.jsx)("div",{className:"flex mt-1",children:_?v.map((e,t)=>{let a=ea(e.suit),r=er(e.rank),s="".concat(a,"_").concat(r,".svg");return b("cards/".concat(s),"".concat(r," of ").concat(a),"large",t)}):g&&N&&N.length>0?k?N.map((e,t)=>{let a=ea(e.suit),r=er(e.rank),s="".concat(a,"_").concat(r,".svg");return b("cards/".concat(s),"".concat(r," of ").concat(a),"large",t)}):N.map((e,t)=>(0,r.jsx)(p,{card:e,variant:"large",idx:t},t)):k?d.map((e,t)=>{let a=ea(e.suit),r=er(e.rank),s="".concat(a,"_").concat(r,".svg");return b("cards/".concat(s),"".concat(r," of ").concat(a),"large",t)}):[...Array(e.card_count)].map((e,t)=>b("cards/back_card.svg","Face down card","large",t))}),(0,r.jsx)("span",{className:"text-xs text-gray-300 mt-1",children:null!=(s=l[e.user_id])?s:"-"})]},e.user_id)})]})})]})}var el=a(9103),ei=a(2525);function eo(e){let{isHost:t,phase:a,onStart:n,onRestart:l,onAddBot:i,onRemoveBot:o,bots:c}=e,[d,u]=(0,s.useState)(""),[m,h]=(0,s.useState)("");(0,s.useEffect)(()=>{if(0===c.length)return void h("");if(!c.find(e=>e.user_id===m)){var e,t;h(null!=(t=null==(e=c[0])?void 0:e.user_id)?t:"")}},[c,m]);let x=(0,s.useMemo)(()=>c.map(e=>({value:e.user_id,label:e.username})),[c]);return t?(0,r.jsxs)(C,{className:"bg-slate-800 border-green-400/20",children:[(0,r.jsx)(R,{children:(0,r.jsxs)(T,{className:"text-yellow-400 text-lg flex items-center gap-2",children:[(0,r.jsx)(Q.A,{className:"h-5 w-5"})," Host Controls"]})}),(0,r.jsxs)(D,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:["waiting"===a&&(0,r.jsx)(v,{onClick:n,className:"bg-green-600 hover:bg-green-700",children:"Start Game"}),(0,r.jsx)(v,{onClick:l,variant:"outline",className:"border-yellow-400 text-yellow-400 hover:bg-yellow-400 bg-slate-900",children:"Restart Game"})]}),(0,r.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{className:"text-sm text-green-300",children:"Add AI Bot"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(b,{value:d,onChange:e=>u(e.target.value),placeholder:"Optional bot name",className:"bg-slate-900 border-green-400/30 text-green-200 placeholder:text-green-700"}),(0,r.jsxs)(v,{onClick:()=>{let e=d.trim();i(e.length?e:void 0),u("")},className:"bg-green-700 hover:bg-green-600 flex items-center gap-2",children:[(0,r.jsx)(el.A,{className:"h-4 w-4"}),"Add"]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{className:"text-sm text-green-300",children:"Remove AI Bot"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("select",{className:"flex-1 rounded-md border border-green-400/30 bg-slate-900 px-3 py-2 text-green-200",value:m,onChange:e=>h(e.target.value),children:[0===x.length&&(0,r.jsx)("option",{value:"",children:"No bots"}),x.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,r.jsxs)(v,{onClick:()=>{m&&o(m)},variant:"destructive",disabled:!m,className:"flex items-center gap-2",children:[(0,r.jsx)(ei.A,{className:"h-4 w-4"}),"Remove"]})]})]})]})]})]}):null}var ec=a(7580),ed=a(3314);function eu(e){let{onlineUsers:t,bots:a}=e;return(0,r.jsx)(C,{className:"bg-slate-800 border-green-400/20",children:(0,r.jsxs)(D,{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(ec.A,{className:"h-4 w-4 text-green-400"}),(0,r.jsxs)("span",{className:"text-green-300",children:["Online users (",t.length,"):"]})]}),(0,r.jsx)("div",{className:"text-white mt-1 text-sm",children:t.length>0?t.join(", "):"None"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(ed.A,{className:"h-4 w-4 text-purple-400"}),(0,r.jsxs)("span",{className:"text-purple-300",children:["AI bots (",a.length,"):"]})]}),(0,r.jsx)("div",{className:"text-white mt-1 text-sm",children:a.length>0?a.join(", "):"No bots active"})]})]})})}function em(e){let{roundNumber:t,waitingPlayers:a}=e;return void 0===t&&void 0===a?null:(0,r.jsx)(C,{className:"bg-slate-800 border-green-400/20",children:(0,r.jsx)(D,{children:(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[void 0!==t&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-green-300",children:"Round:"}),(0,r.jsx)("span",{className:"text-white ml-2",children:t})]}),void 0!==a&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-green-300",children:"Waiting players:"}),(0,r.jsx)("span",{className:"text-white ml-2",children:a})]})]})})})}function eh(e){let{messages:t}=e;return 0===t.length?null:(0,r.jsx)(C,{className:"bg-slate-800 border-green-400/20",children:(0,r.jsx)(D,{children:(0,r.jsx)(F,{type:"single",collapsible:!0,children:(0,r.jsxs)(U,{value:"history",children:[(0,r.jsx)(P,{className:"text-green-400 text-lg",children:"Recent Messages"}),(0,r.jsx)(W,{children:(0,r.jsx)("div",{className:"text-sm max-h-64 overflow-y-auto",children:t.map((e,t)=>(0,r.jsx)("div",{className:"text-gray-300",children:e},t))})})]})})})})}function ex(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:o("w-full caption-bottom text-sm",t),...a})})}function eg(e){let{className:t,...a}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:o("[&_tr]:border-b",t),...a})}function ef(e){let{className:t,...a}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:o("[&_tr:last-child]:border-0",t),...a})}function ep(e){let{className:t,...a}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:o("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function ev(e){let{className:t,...a}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:o("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function eb(e){let{className:t,...a}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:o("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function ej(e){let{entries:t}=e;return(0,r.jsxs)(C,{className:"bg-slate-800 border-green-400/20",children:[(0,r.jsx)(R,{children:(0,r.jsx)(T,{className:"text-yellow-400 text-lg flex items-center justify-center gap-2",children:"\uD83D\uDC51 LEADERBOARD \uD83D\uDC51"})}),(0,r.jsx)(D,{children:(0,r.jsxs)(ex,{children:[(0,r.jsx)(eg,{children:(0,r.jsxs)(ep,{className:"border-green-400/20 hover:bg-slate-700/50 h-12",children:[(0,r.jsx)(ev,{className:"text-green-300",children:"Username"}),(0,r.jsx)(ev,{className:"text-green-300",children:"Wins"}),(0,r.jsx)(ev,{className:"text-green-300",children:"Played"})]})}),(0,r.jsx)(ef,{children:t.map(e=>(0,r.jsxs)(ep,{className:"border-green-400/20 hover:bg-slate-700/50 h-12",children:[(0,r.jsx)(eb,{className:"text-white",children:e.username}),(0,r.jsx)(eb,{className:"text-white",children:e.wins}),(0,r.jsx)(eb,{className:"text-white",children:e.games_played})]},e.username))})]})})]})}var eN=a(6671);function e_(){var e;let{showUsernameDialog:t,setShowUsernameDialog:a,usernameError:n,setUsernameError:l,isConnecting:i,setIsConnecting:o}=function(){let[e,t]=(0,s.useState)(!0),[a,r]=(0,s.useState)(""),[n,l]=(0,s.useState)(!1);return{showUsernameDialog:e,setShowUsernameDialog:t,usernameError:a,setUsernameError:r,isConnecting:n,setIsConnecting:l}}(),{userId:c,setUserId:f,username:p,setUsername:v,isHost:b,setIsHost:j}=function(){let[e,t]=(0,s.useState)(""),[a,r]=(0,s.useState)(""),[n,l]=(0,s.useState)(!1);return{userId:e,setUserId:t,username:a,setUsername:r,isHost:n,setIsHost:l}}(),{onlineUsers:N,setOnlineUsers:_}=function(){let[e,t]=(0,s.useState)([]);return{onlineUsers:e,setOnlineUsers:t}}(),{gameState:k,setGameState:y}=function(){let[e,t]=(0,s.useState)(null);return{gameState:e,setGameState:t}}(),{messages:w,addMessage:S}=function(){let[e,t]=(0,s.useState)([]);return{messages:e,addMessage:(0,s.useCallback)(e=>{t(t=>[...t.slice(-20),e])},[])}}(),{playerLastCalls:E,setPlayerLastCalls:C}=function(){let[e,t]=(0,s.useState)({});return{playerLastCalls:e,setPlayerLastCalls:t}}(),[R,T]=(0,s.useState)([]),{yourCards:D,setYourCards:L,previousRoundHands:O,setPreviousRoundHands:F,currentRoundHands:U,setCurrentRoundHands:P}=function(){let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)({}),[n,l]=(0,s.useState)({});return{yourCards:e,setYourCards:t,previousRoundHands:a,setPreviousRoundHands:r,currentRoundHands:n,setCurrentRoundHands:l}}(),{isConnected:W,connectionError:I,connect:G,disconnect:H,sendMessage:B,addMessageHandler:M}=function(e){let[t,a]=(0,s.useState)(!1),[r,n]=(0,s.useState)(null),l=(0,s.useRef)(null),i=(0,s.useRef)(new Map),o=(0,s.useCallback)(()=>new Promise((t,r)=>{try{let s=new WebSocket(e);s.onopen=()=>{a(!0),n(null),console.log("Connected to WebSocket server"),t(s)},s.onclose=()=>{a(!1),console.log("Disconnected from WebSocket server")},s.onerror=e=>{n("Connection failed"),console.error("WebSocket error:",e),r(e)},s.onmessage=e=>{try{let t=JSON.parse(e.data),a=i.current.get(t.type);a&&a(t.data)}catch(e){console.error("Error parsing message:",e)}},l.current=s}catch(e){n("Failed to create WebSocket connection"),console.error("WebSocket connection error:",e),r(e)}}),[e]),c=(0,s.useCallback)(()=>{l.current&&(l.current.close(),l.current=null)},[]),d=(0,s.useCallback)((e,t)=>{l.current&&l.current.readyState===WebSocket.OPEN&&l.current.send(JSON.stringify({type:e,data:t}))},[]),u=(0,s.useCallback)((e,t)=>{i.current.set(e,t)},[]),m=(0,s.useCallback)(e=>{i.current.delete(e)},[]);return(0,s.useEffect)(()=>()=>{c()},[c]),{isConnected:t,connectionError:r,connect:o,disconnect:c,sendMessage:d,addMessageHandler:u,removeMessageHandler:m}}("wss://online-trading-card-game-production-dec2.up.railway.app"),[K,z]=(0,s.useState)([]);(0,s.useEffect)(()=>{M(q.USER_JOIN,e=>{e.success?(z(e.leaderboard||[]),f(e.user_id),v(e.username),j(e.is_host||!1),a(!1),l(""),S(e.message||"Joined game successfully"),e.is_host&&S("You are the host!")):l(e.message||"Failed to join game"),o(!1)}),M(q.USERNAME_ERROR,e=>{l(e.message||"Username error"),o(!1)}),M(q.GAME_STATE_UPDATE,e=>{var t,a,r,s,n;y(e.game_state),_(e.online_users||[]),T(((null==(t=e.game_state)?void 0:t.players)||[]).filter(t=>!(e.online_users||[]).includes(t.username)).map(e=>({user_id:e.user_id,username:e.username}))),e.current_round_cards&&e.current_round_cards.length>0?P(e.current_round_cards.reduce((e,t)=>(e[t.user_id]=t.cards,e),{})):P({});let l=null==(a=e.game_state)?void 0:a.current_call;(null==l?void 0:l.player_id)&&(null==l?void 0:l.hand)&&(C(e=>({...e,[l.player_id]:l.hand})),S("".concat(null==(n=e.game_state)||null==(s=n.players.find(e=>e.user_id===l.player_id))?void 0:s.username," called ").concat(l.hand))),(null==(r=e.game_state)?void 0:r.phase)!=="playing"&&(C({}),L([]),P({}))}),M(q.PLAYER_UPDATE,e=>{if(void 0!==e.your_cards&&L(e.your_cards),e.bot_added){let{user_id:t,username:a}=e.bot_added;T(e=>e.find(e=>e.user_id===t)?e:[...e,{user_id:t,username:a}]),S("Bot ".concat(a," joined the table"))}if(e.bot_removed){let{user_id:t,username:a}=e.bot_removed;T(e=>e.filter(e=>e.user_id!==t)),S("".concat(a||"Bot"," left the table"))}}),M(q.GAME_START,()=>{S("Game started!"),C({}),F({}),L([])}),M(q.GAME_RESTART,()=>{S("Game restarted!"),C({}),F({}),L([])}),M(q.HOST_CHANGED,e=>{let t=e.new_host||"",a=e.host_id;j(a===c),S("New host: ".concat(t)),a===c&&S("You are now the host!")}),M(q.USER_KICKED,e=>{S(e.message||"You were kicked from the game"),H()}),M(q.USER_LEAVE,e=>{let t=e.username||"";S("".concat(t," has left the game"))}),M(q.WAITING_FOR_GAME,e=>{S(e.message||"Please wait for the next game"),L([])}),M(q.ROUND_START,e=>{let t=e.round_number;C({}),S("---"),S("Round ".concat(t," has started"))}),M(q.SHOW_CARDS,()=>{S("Revealing cards to all players")}),M(q.CALL_BLUFF,e=>{console.dir(e),e.loser.is_eliminated||0==e.loser.card_count?(0,eN.oR)("Player ".concat(e.loser.username," such a FAILUREEEE !")):(0,eN.oR)("Player ".concat(e.loser.username," STOOPID ").concat(e.loser.card_count-1," times")),S(e.message||"Bluff called"),e.previous_round_cards&&e.previous_round_cards.length>0?F(e.previous_round_cards.reduce((e,t)=>(e[t.user_id]=t.cards,e),{})):F({})}),M(q.ERROR,e=>{S("Error: ".concat(e.message||"Unknown error"))})},[M,c,H,S]);let J=(0,s.useCallback)(async e=>{o(!0),l(""),W||await G(),B(q.USER_JOIN,{username:e})},[W,G,B]),V=(null==k?void 0:k.phase)==="playing"&&(null==k?void 0:k.current_player_id)===c,$=null==k||null==(e=k.current_call)?void 0:e.hand;return(0,r.jsxs)("div",{className:"min-h-screen bg-slate-900 text-green-400 p-6 font-mono",children:[(0,r.jsx)(A,{isOpen:t,onSubmit:J,error:n,isConnecting:i}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"text-2xl text-green-400 flex items-center justify-center gap-2",children:[(0,r.jsx)(m.A,{className:"h-6 w-6"}),(0,r.jsx)(h.A,{className:"h-6 w-6"}),"Online Card Game",(0,r.jsx)(x.A,{className:"h-6 w-6"}),(0,r.jsx)(g.A,{className:"h-6 w-6"})]}),I&&(0,r.jsx)(d,{className:"border-red-400/20 bg-red-900/20",children:(0,r.jsxs)(u,{className:"text-red-400",children:["Connection Error: ",I]})}),(0,r.jsx)(ee,{username:p,isHost:b,isConnected:W,gamePhase:null==k?void 0:k.phase}),(null==k?void 0:k.phase)==="playing"&&(0,r.jsx)(Y,{onCallHand:e=>{B(q.CALL_HAND,{user_id:c,hand_spec:e})},onCallBluff:()=>{B(q.CALL_BLUFF,{user_id:c})},isYourTurn:V,currentCall:$}),(0,r.jsx)(en,{players:(null==k?void 0:k.players)||[],currentRoundHands:U,previousRoundHands:O,playerLastCalls:E,gamePhase:null==k?void 0:k.phase,currentPlayerId:null==k?void 0:k.current_player_id,currentUserId:c,yourCards:D,isHost:b,botIds:new Set(R.map(e=>e.user_id)),onKickPlayer:e=>{b&&B(q.KICK_USER,{host_id:c,target_username:e})}}),(0,r.jsx)(eo,{isHost:b,phase:null==k?void 0:k.phase,onStart:()=>{B(q.GAME_START,{user_id:c})},onRestart:()=>{B(q.GAME_RESTART,{user_id:c})},onAddBot:e=>{if(!b)return;let t={host_id:c};e&&(t.bot_name=e),B(q.ADD_BOT,t)},onRemoveBot:e=>{b&&B(q.REMOVE_BOT,{host_id:c,bot_id:e})},bots:R}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(eu,{onlineUsers:N,bots:R.map(e=>e.username)}),(0,r.jsx)(em,{roundNumber:null==k?void 0:k.round_number,waitingPlayers:null==k?void 0:k.waiting_players_count})]}),(0,r.jsx)(eh,{messages:w}),(0,r.jsx)(ej,{entries:K})]})]})}},9236:(e,t,a)=>{Promise.resolve().then(a.bind(a,3922))}},e=>{var t=t=>e(e.s=t);e.O(0,[671,765,441,684,358],()=>t(9236)),_N_E=e.O()}]);