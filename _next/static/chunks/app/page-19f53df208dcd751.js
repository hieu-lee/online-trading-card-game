(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2496:(e,t,r)=>{Promise.resolve().then(r.bind(r,2627))},2627:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>em});var a=r(5155),s=r(2115),n=r(2085),l=r(2596),i=r(9688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,l.$)(t))}let c=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:o(c({variant:r}),t),...s})}function u(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:o("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...r})}var m=r(1888),h=r(1436),g=r(6193),x=r(1976),f=r(9708);let p=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function v(e){let{className:t,variant:r,size:s,asChild:n=!1,...l}=e,i=n?f.DX:"button";return(0,a.jsx)(i,{"data-slot":"button",className:o(p({variant:r,size:s,className:t})),...l})}function b(e){let{className:t,type:r,...s}=e;return(0,a.jsx)("input",{type:r,"data-slot":"input",className:o("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}var j=r(606),k=r(4416);function _(e){let{...t}=e;return(0,a.jsx)(j.bL,{"data-slot":"dialog",...t})}function y(e){let{...t}=e;return(0,a.jsx)(j.ZL,{"data-slot":"dialog-portal",...t})}function N(e){let{className:t,...r}=e;return(0,a.jsx)(j.hJ,{"data-slot":"dialog-overlay",className:o("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...r})}function w(e){let{className:t,children:r,showCloseButton:s=!0,...n}=e;return(0,a.jsxs)(y,{"data-slot":"dialog-portal",children:[(0,a.jsx)(N,{}),(0,a.jsxs)(j.UC,{"data-slot":"dialog-content",className:o("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[r,s&&(0,a.jsxs)(j.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(k.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function S(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:o("flex flex-col gap-2 text-center sm:text-left",t),...r})}function E(e){let{className:t,...r}=e;return(0,a.jsx)(j.hE,{"data-slot":"dialog-title",className:o("text-lg leading-none font-semibold",t),...r})}function C(e){let{isOpen:t,onSubmit:r,error:n,isConnecting:l}=e,[i,o]=(0,s.useState)("");return(0,a.jsx)(_,{open:t,children:(0,a.jsxs)(w,{className:"bg-slate-800 border-green-400/20 text-white [&>button]:hidden",children:[(0,a.jsx)(S,{children:(0,a.jsx)(E,{className:"text-green-400 text-center",children:"Join Online Card Game"})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i.trim()&&r(i.trim())},className:"space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(b,{value:i,onChange:e=>o(e.target.value),placeholder:"Enter your username",className:"bg-slate-700 border-green-400/20 text-white placeholder:text-gray-400",disabled:l,autoFocus:!0})}),n&&(0,a.jsx)(d,{className:"border-red-400/20 bg-red-900/20",children:(0,a.jsx)(u,{className:"text-red-400",children:n})}),(0,a.jsx)(v,{type:"submit",disabled:!i.trim()||l,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:l?"Connecting...":"Join Game"})]})]})})}function A(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:o("bg-card text-card-foreground flex flex-col gap-2 rounded-xl border py-6 shadow-sm",t),...r})}function R(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:o("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function T(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:o("leading-none font-semibold",t),...r})}function L(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:o("px-6",t),...r})}var F=r(6380),D=r(6474);function U(e){let{...t}=e;return(0,a.jsx)(F.bL,{"data-slot":"accordion",...t})}function P(e){let{className:t,...r}=e;return(0,a.jsx)(F.q7,{"data-slot":"accordion-item",className:o("border-b last:border-b-0",t),...r})}function O(e){let{className:t,children:r,...s}=e;return(0,a.jsx)(F.Y9,{className:"flex",children:(0,a.jsxs)(F.l9,{"data-slot":"accordion-trigger",className:o("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-0  text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...s,children:[r,(0,a.jsx)(D.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function W(e){let{className:t,children:r,...s}=e;return(0,a.jsx)(F.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...s,children:(0,a.jsx)("div",{className:o(t),children:r})})}function G(e){let{suggestions:t,visible:r,selectedIndex:s,onSelect:n}=e;return r&&0!==t.length?(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-700 border border-green-400/20 rounded-md shadow-lg z-50 max-h-60 overflow-y-auto",children:t.map((e,t)=>(0,a.jsxs)("div",{ref:t===s?e=>null==e?void 0:e.scrollIntoView({block:"nearest"}):void 0,className:"px-3 py-2 cursor-pointer border-b border-slate-600 last:border-b-0 ".concat(t===s?"bg-slate-600":"hover:bg-slate-600"),onMouseDown:t=>{t.preventDefault(),n(e)},children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.value}),e.description&&(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:e.description})]},t))}):null}let H={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",j:"jack",jack:"jack",q:"queen",queen:"queen",k:"king",king:"king",a:"ace",ace:"ace"};function I(e){return H[e.toLowerCase().replace(/s$/,"")]}function K(e){let t=e.trim().toLowerCase();if(!t)return null;t.startsWith("call ")&&(t=t.slice(5));let r=t.split(/\s+/);if(0===r.length)return null;if(1===r.length)return"high card ".concat(I(r[0]));if(["2","3","4"].includes(r[0])){if(2===r.length){let e=I(r[1]);if(!e)return null;switch(r[0]){case"2":return"pair of ".concat(e);case"3":return"three of a kind ".concat(e);case"4":return"four of a kind ".concat(e)}}if(4===r.length&&"2"===r[0]&&"2"===r[2]){let e=I(r[1]),t=I(r[3]);if(e&&t&&e!==t)return"two pairs ".concat(e," and ").concat(t)}if(4===r.length&&("2"===r[0]&&"3"===r[2]||"3"===r[0]&&"2"===r[2])){let e="2"===r[0]?I(r[1]):I(r[3]),t="3"===r[0]?I(r[1]):I(r[3]);if(e&&t&&e!==t)return"full house: 3 ".concat(t," and 2 ").concat(e)}}let a=t.match(/^straight\s+(\w+)$/);if(a){let e=I(a[1]);if(e)return"straight from ".concat(e)}let s=t.match(/^(pair of|pair)\s+(\w+)/);if(s){let e=I(s[2]);if(e)return"pair of ".concat(e)}let n=t.match(/^(three of a kind|3 of a kind|three of|triple)\s+(\w+)/);if(n){let e=I(n[2]);if(e)return"three of a kind ".concat(e)}let l=t.match(/^(four of a kind|4 of a kind|four of|quad)\s+(\w+)/);if(l){let e=I(l[2]);if(e)return"four of a kind ".concat(e)}return["high card","pair","two pairs","three of a kind","straight","flush","full house","four of a kind","straight flush","royal flush"].some(e=>t.startsWith(e))?t:null}let M=["high card","pair of","two pairs","three of a kind","straight from","flush","royal flush"],z=[{command:"/high",description:"High Card",parameters:["rank"],template:"High Card {rank}"},{command:"/pair",description:"Pair of cards",parameters:["rank"],template:"Pair of {rank}"},{command:"/twopair",description:"Two Pairs",parameters:["rank1","rank2"],template:"Two Pairs {rank1} and {rank2}"},{command:"/three",description:"Three of a Kind",parameters:["rank"],template:"Three of a Kind {rank}"},{command:"/straight",description:"Straight",parameters:["rank"],template:"Straight from {rank}"},{command:"/flush",description:"Flush",parameters:["suit","rank1","rank2","rank3","rank4","rank5"],template:"Flush of {suit}: {rank1},{rank2},{rank3},{rank4},{rank5}"},{command:"/fullhouse",description:"Full House",parameters:["rank1","rank2"],template:"Full House: 3 {rank1} and 2 {rank2}"},{command:"/four",description:"Four of a Kind",parameters:["rank"],template:"Four of a Kind {rank}"},{command:"/straightflush",description:"Straight Flush",parameters:["suit","rank"],template:"Straight Flush {suit} from {rank}"},{command:"/royal",description:"Royal Flush",parameters:["suit"],template:"Royal Flush {suit}"}],J=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],Y=["hearts","diamonds","clubs","spades"];function q(e){let{onCallHand:t,onCallBluff:r,isYourTurn:n,currentCall:l}=e,i=(0,s.useRef)(null),{handSpec:o,setHandSpec:c,showSuggestions:d,suggestions:u,selectedSuggestion:m,currentCommand:h,parameterIndex:g,handleInputChange:x,handleKeyDown:f,applySuggestion:p,translateShorthandToSpec:j}=function(e){let[t,r]=(0,s.useState)(""),[a,n]=(0,s.useState)(!1),[l,i]=(0,s.useState)([]),[o,c]=(0,s.useState)(0),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(0),g=(e,t)=>{let r=e.template;return e.parameters.forEach((e,a)=>{t[a]&&(r=r.replace("{".concat(e,"}"),t[a]))}),r},x=e=>{if(!e.startsWith("/")){n(!1),u(null),h(0);return}let t=e.split(" "),r=t[0];if(1===t.length){let e=z.filter(e=>e.command.startsWith(r.toLowerCase()));i(e.map(e=>({type:"command",value:e.command,description:e.description,command:e}))),n(e.length>0),u(null),h(0)}else{let e=z.find(e=>e.command===r.toLowerCase());if(e){u(e);let r=t.length-2;if(h(r),r<e.parameters.length){let a=e.parameters[r],s=t[t.length-1]||"",l=[];a.includes("rank")?l=J.filter(e=>e.toLowerCase().startsWith(s.toLowerCase())):a.includes("suit")&&(l=Y.filter(e=>e.toLowerCase().startsWith(s.toLowerCase()))),i(l.map(e=>({type:"parameter",value:e,paramType:a}))),n(l.length>0)}else n(!1)}else n(!1),u(null),h(0)}c(0)},f=a=>{if("command"===a.type){let t=a.value+" ";r(t),u(a.command),h(0),n(!1),setTimeout(()=>{var r;x(t),null==(r=e.current)||r.focus()},50)}else if("parameter"===a.type){let e=t.split(" ");e[e.length-1]=a.value;let s=e.join(" ");if(d&&m+1<d.parameters.length){let e=s+" ";r(e),n(!1),setTimeout(()=>x(e),50)}else d&&(r(g(d,e.slice(1))),n(!1),u(null),h(0))}};return(0,s.useEffect)(()=>{let t=t=>{e.current&&!e.current.contains(t.target)&&n(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[e]),{handSpec:t,setHandSpec:r,showSuggestions:a,suggestions:l,selectedSuggestion:o,currentCommand:d,parameterIndex:m,handleKeyDown:e=>{if(a&&l.length>0)if("ArrowDown"===e.key)e.preventDefault(),c(e=>(e+1)%l.length);else if("ArrowUp"===e.key)e.preventDefault(),c(e=>(e-1+l.length)%l.length);else if("Tab"===e.key||"Enter"===e.key){e.preventDefault(),f(l[o]);return}else"Escape"===e.key&&n(!1);if("Tab"===e.key&&!a){e.preventDefault();let a=t.trim().toLowerCase();if(!a)return;let s=M.filter(e=>e.startsWith(a));s.length>0&&r(s[0])}},handleInputChange:e=>{let t=e.target.value;r(t),x(t)},applySuggestion:f,translateShorthandToSpec:K}}(i),k=e=>{var r;e.preventDefault();let a=o.trim();!a||a.startsWith("/")||(t(null!=(r=j(a))?r:a),c(""))};return n?(0,a.jsx)(A,{className:"bg-slate-800 border-green-400/20",children:(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-green-400 font-semibold",children:"Your Turn!"}),l&&(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:["Current call: ",l]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(b,{ref:i,value:o,onChange:x,onKeyDown:f,onKeyPress:e=>{"Enter"!==e.key||d||o.startsWith("/")||k(e)},placeholder:"Type / for commands or enter hand manually...",className:"bg-slate-700 border-green-400/20 text-white placeholder:text-gray-500",autoComplete:"off"}),(0,a.jsx)(G,{suggestions:u,visible:d,selectedIndex:m,onSelect:p})]}),(0,a.jsx)(v,{onClick:e=>k(e),disabled:!o.trim()||o.startsWith("/"),className:"bg-blue-500 hover:bg-blue-700",children:"Call"})]}),h&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-slate-700 rounded text-sm",children:[(0,a.jsx)("div",{className:"text-green-400 font-medium",children:h.description}),(0,a.jsxs)("div",{className:"text-gray-300",children:["Parameters:"," ",h.parameters.map((e,t)=>(0,a.jsxs)("span",{className:t===g?"text-yellow-400 font-bold":"text-gray-400",children:[e,t<h.parameters.length-1?", ":""]},e))]}),(0,a.jsxs)("div",{className:"text-gray-400 text-xs mt-1",children:["Preview: ",h.template]})]})]}),l&&(0,a.jsx)(v,{onClick:()=>r(),variant:"destructive",className:"w-full",children:"Call Bluff"}),(0,a.jsxs)(U,{type:"single",collapsible:!0,className:"text-sm text-gray-400",children:[(0,a.jsxs)(P,{value:"commands",children:[(0,a.jsx)(O,{children:"Slash Commands"}),(0,a.jsxs)(W,{children:[z.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-blue-400 font-mono",children:e.command}),(0,a.jsx)("span",{className:"text-gray-300",children:e.description})]},e.command)),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"Type / to see available commands, use Tab or Enter to select"})]})]}),(0,a.jsxs)(P,{value:"shortcuts",children:[(0,a.jsx)(O,{children:"Shortcuts"}),(0,a.jsxs)(W,{children:[(0,a.jsx)("div",{children:(0,a.jsx)("b",{children:"------"})}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"[rank]"})," - for high card hands"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"2 [rank]"}),' - for pairs (e.g., "2 kings", "2 j", "2 3")']}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"3 [rank]"}),' - for three of a kind (e.g., "3 j", "3 10")']}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"straight [rank]"}),' - for straights starting [rank] (e.g., "straight 10")']}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"2 [rank1] 2 [rank2]"}),' - for two pairs (e.g., "2 3 2 4", "2 k 2 a")']}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"2 [rank1] 3 [rank2]"})," or ",(0,a.jsx)("strong",{children:"3 [rank1] 2 [rank2]"}),' - for full house (e.g., "2 k 3 aces", "3 j 2 10")']}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"4 [rank]"}),' - for four of a kind (e.g., "4 aces", "4 k", "4 7")']})]})]})]}),(0,a.jsxs)(P,{value:"hands",children:[(0,a.jsx)(O,{children:"Manual Hand Entry"}),(0,a.jsxs)(W,{children:[(0,a.jsx)("div",{children:(0,a.jsx)("b",{children:"------"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"High Card"})," <rank>"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Pair of"})," <rank>"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Two Pairs"})," <rank1> and <rank2>"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Three of a Kind "}),"<rank>"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Straight from"})," <rank>"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Flush of"})," <suit>: <rank1>,<rank2>,<rank3>,<rank4>,<rank5>"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Full House: 3"})," <rank1> and 2 <rank2>"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Four of a Kind "}),"<rank>"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Straight Flush"})," <suit> from <rank>"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Royal Flush"})," <suit>"]})]})]})]})]})})}):(0,a.jsx)(A,{className:"bg-slate-800 border-green-400/20",children:(0,a.jsx)(L,{children:(0,a.jsx)("div",{className:"text-center text-gray-400",children:l?"Current call: ".concat(l):"Waiting for your turn..."})})})}var B=function(e){return e.USER_JOIN="user_join",e.USERNAME_ERROR="username_error",e.GAME_STATE_UPDATE="game_state_update",e.PLAYER_UPDATE="player_update",e.GAME_START="game_start",e.GAME_RESTART="game_restart",e.HOST_CHANGED="host_changed",e.USER_KICKED="user_kicked",e.USER_LEAVE="user_leave",e.WAITING_FOR_GAME="waiting_for_game",e.ROUND_START="round_start",e.ROUND_END="round_end",e.SHOW_CARDS="show_cards",e.CALL_BLUFF="call_bluff",e.CALL_HAND="call_hand",e.KICK_USER="kick_user",e.ERROR="error",e}({});let V=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function $(e){let{className:t,variant:r,asChild:s=!1,...n}=e,l=s?f.DX:"span";return(0,a.jsx)(l,{"data-slot":"badge",className:o(V({variant:r}),t),...n})}var Q=r(7951),X=r(6517),Z=r(4449);function ee(e){let{username:t,isHost:r,isConnected:s,gamePhase:n}=e;return(0,a.jsx)(A,{className:"bg-slate-800 border-green-400/20",children:(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-green-300",children:"Username:"}),(0,a.jsx)("span",{className:"text-white",children:t}),r&&(0,a.jsxs)($,{variant:"outline",className:"text-yellow-400 border-yellow-400/50",children:[(0,a.jsx)(Q.A,{className:"h-3 w-3 mr-1"}),"HOST"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-green-300",children:"Connected:"}),s?(0,a.jsxs)($,{className:"bg-green-600",children:[(0,a.jsx)(X.A,{className:"h-3 w-3 mr-1"}),"Yes"]}):(0,a.jsxs)($,{variant:"destructive",children:[(0,a.jsx)(Z.A,{className:"h-3 w-3 mr-1"}),"No"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-green-300",children:"Game Phase:"}),(0,a.jsx)($,{variant:"outline",className:"text-blue-400 border-blue-400/50",children:(null==n?void 0:n.replace("_"," ").toUpperCase())||"WAITING"})]})]})})})}var et=r(6766);let er=e=>({"♥":"hearts","♦":"diamonds","♣":"clubs","♠":"spades",hearts:"hearts",diamonds:"diamonds",clubs:"clubs",spades:"spades"})[e]||e.toLowerCase(),ea=e=>({11:"jack",12:"queen",13:"king",14:"ace"})[e]||e.toString(),es=[{top:"-8%",left:"50%",transform:"translate(-50%, 0)"},{top:"10%",left:"85%",transform:"translate(-50%, -50%)"},{top:"50%",left:"100%",transform:"translate(-100%, -50%)"},{top:"90%",left:"85%",transform:"translate(-50%, -50%)"},{top:"108%",left:"50%",transform:"translate(-50%, -100%)"},{top:"90%",left:"15%",transform:"translate(-50%, -50%)"},{top:"50%",left:"0%",transform:"translate(0, -50%)"},{top:"10%",left:"15%",transform:"translate(-50%, -50%)"}];function en(e){let{players:t,currentRoundHands:r,previousRoundHands:n,playerLastCalls:l,gamePhase:i,currentPlayerId:o,currentUserId:c,yourCards:d,isHost:u,onKickPlayer:m}=e,h=function(){let[e,t]=s.useState(void 0);return s.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),r=()=>{t(window.innerWidth<768)};return e.addEventListener("change",r),t(window.innerWidth<768),()=>e.removeEventListener("change",r)},[]),!!e}(),[g,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(Object.values(n).some(e=>Array.isArray(e)&&e.length>0)){x(!0);let e=setTimeout(()=>{x(!1)},5e3);return()=>clearTimeout(e)}},[n]);let f=e=>{let{card:t,variant:r,idx:n}=e,[l,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=setTimeout(()=>i(!0),20);return()=>clearTimeout(e)},[]);let o=er(t.suit),c=ea(t.rank),d="".concat(o,"_").concat(c,".svg");return(0,a.jsx)("div",{className:"flip-card relative ".concat({large:"w-12 h-18 sm:w-16 sm:h-24 md:w-20 md:h-28",small:"w-10 h-16 sm:w-12 sm:h-18 md:w-14 md:h-20"}[r]," ").concat(0===n?"":({large:"-ml-6 sm:-ml-8 md:-ml-10",small:"-ml-4 sm:-ml-5 md:-ml-6"})[r]),children:(0,a.jsxs)("div",{className:"flip-card-inner w-full h-full ".concat(l?"flipped":""),children:[(0,a.jsx)(et.default,{src:"cards/back_card.svg",alt:"Back of card",fill:!0,className:"flip-card-front object-contain"}),(0,a.jsx)(et.default,{src:"cards/".concat(d),alt:"".concat(c," of ").concat(o),fill:!0,className:"flip-card-back object-contain"})]})})};if(!(null==t?void 0:t.length))return null;let p=Array.from({length:8}).map((e,r)=>{var a;return null!=(a=t[r])?a:null}),v=(e,t,r,s)=>(0,a.jsx)("div",{className:"relative ".concat({large:"w-12 h-18 sm:w-16 sm:h-24 md:w-20 md:h-28",small:"w-10 h-16 sm:w-12 sm:h-18 md:w-14 md:h-20"}[r]," ").concat(0===s?"":({large:"-ml-6 sm:-ml-8 md:-ml-10",small:"-ml-4 sm:-ml-5 md:-ml-6"})[r]),children:(0,a.jsx)(et.default,{src:e,alt:t,fill:!0,className:"object-contain"})},s),b=e=>{let{player:t,borderColor:r}=e,s=u&&t.user_id!==c;return(0,a.jsxs)("div",{className:"relative px-2 py-1 rounded-md bg-slate-800 text-white text-sm border-2 flex items-center justify-center ".concat(r),children:[t.username,s&&(0,a.jsx)("button",{onClick:()=>m(t.username),className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white rounded-full p-0.5",title:"Kick player",children:(0,a.jsx)(k.A,{className:"h-3 w-3"})})]})};return(0,a.jsxs)(A,{className:"bg-slate-800 border-green-400/20",children:[(0,a.jsx)(R,{children:(0,a.jsx)(T,{className:"text-green-400 text-lg",children:"Players"})}),(0,a.jsx)(L,{children:h?(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:t.map(e=>{if(!e)return null;let t="playing"===i&&e.user_id===o,l=e.is_eliminated,u=r[e.user_id],m=n[e.user_id],h=u&&u.length>0,x=e.user_id===c;return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(b,{player:e,borderColor:l?"border-red-600":t?"border-green-500":"border-gray-600"}),(0,a.jsx)("div",{className:"flex items-center",children:!l&&(0,a.jsx)(a.Fragment,{children:h?u.map((e,t)=>{let r=er(e.suit),a=ea(e.rank),s="".concat(r,"_").concat(a,".svg");return v("cards/".concat(s),"".concat(a," of ").concat(r),"small",t)}):g&&m&&m.length>0?x?m.map((e,t)=>{let r=er(e.suit),a=ea(e.rank),s="".concat(r,"_").concat(a,".svg");return v("cards/".concat(s),"".concat(a," of ").concat(r),"small",t)}):m.map((e,t)=>(0,a.jsx)(f,{card:e,variant:"small",idx:t},t)):x?d.map((e,t)=>{let r=er(e.suit),a=ea(e.rank),s="".concat(r,"_").concat(a,".svg");return v("cards/".concat(s),"".concat(a," of ").concat(r),"small",t)}):[...Array(e.card_count)].map((e,t)=>v("cards/back_card.svg","Face down card","small",t))})})]},e.user_id)})}):(0,a.jsxs)("div",{className:"relative w-full max-w-lg mx-auto mt-4 aspect-square select-none",children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-green-800 border-8 border-green-900 shadow-inner"}),p.map((e,t)=>{var s;let u=es[t];if(!e)return null;let m="playing"===i&&e.user_id===o,h=e.is_eliminated,x=r[e.user_id],p=n[e.user_id],j=x&&x.length>0,k=e.user_id===c;return(0,a.jsxs)("div",{className:"absolute flex flex-col items-center",style:{top:u.top,left:u.left,transform:u.transform},children:[(0,a.jsx)(b,{player:e,borderColor:h?"border-red-600":m?"border-green-500":"border-gray-600"}),!h&&(0,a.jsx)("div",{className:"flex mt-1",children:j?x.map((e,t)=>{let r=er(e.suit),a=ea(e.rank),s="".concat(r,"_").concat(a,".svg");return v("cards/".concat(s),"".concat(a," of ").concat(r),"large",t)}):g&&p&&p.length>0?k?p.map((e,t)=>{let r=er(e.suit),a=ea(e.rank),s="".concat(r,"_").concat(a,".svg");return v("cards/".concat(s),"".concat(a," of ").concat(r),"large",t)}):p.map((e,t)=>(0,a.jsx)(f,{card:e,variant:"large",idx:t},t)):k?d.map((e,t)=>{let r=er(e.suit),a=ea(e.rank),s="".concat(r,"_").concat(a,".svg");return v("cards/".concat(s),"".concat(a," of ").concat(r),"large",t)}):[...Array(e.card_count)].map((e,t)=>v("cards/back_card.svg","Face down card","large",t))}),(0,a.jsx)("span",{className:"text-xs text-gray-300 mt-1",children:null!=(s=l[e.user_id])?s:"-"})]},e.user_id)})]})})]})}function el(e){let{isHost:t,phase:r,onStart:s,onRestart:n}=e;return t?(0,a.jsxs)(A,{className:"bg-slate-800 border-green-400/20",children:[(0,a.jsx)(R,{children:(0,a.jsxs)(T,{className:"text-yellow-400 text-lg flex items-center gap-2",children:[(0,a.jsx)(Q.A,{className:"h-5 w-5"})," Host Controls"]})}),(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:["waiting"===r&&(0,a.jsx)(v,{onClick:s,className:"bg-green-600 hover:bg-green-700",children:"Start Game"}),(0,a.jsx)(v,{onClick:n,variant:"outline",className:"border-yellow-400 text-yellow-400 hover:bg-yellow-400 bg-slate-900",children:"Restart Game"})]})})]}):null}var ei=r(7580);function eo(e){let{onlineUsers:t}=e;return(0,a.jsx)(A,{className:"bg-slate-800 border-green-400/20",children:(0,a.jsxs)(L,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(ei.A,{className:"h-4 w-4 text-green-400"}),(0,a.jsxs)("span",{className:"text-green-300",children:["Online users (",t.length,"):"]})]}),(0,a.jsx)("div",{className:"text-white mt-2",children:t.join(", ")||"None"})]})})}function ec(e){let{roundNumber:t,waitingPlayers:r}=e;return void 0===t&&void 0===r?null:(0,a.jsx)(A,{className:"bg-slate-800 border-green-400/20",children:(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[void 0!==t&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-green-300",children:"Round:"}),(0,a.jsx)("span",{className:"text-white ml-2",children:t})]}),void 0!==r&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-green-300",children:"Waiting players:"}),(0,a.jsx)("span",{className:"text-white ml-2",children:r})]})]})})})}function ed(e){let{messages:t}=e;return 0===t.length?null:(0,a.jsx)(A,{className:"bg-slate-800 border-green-400/20",children:(0,a.jsx)(L,{children:(0,a.jsx)(U,{type:"single",collapsible:!0,children:(0,a.jsxs)(P,{value:"history",children:[(0,a.jsx)(O,{className:"text-green-400 text-lg",children:"Recent Messages"}),(0,a.jsx)(W,{children:(0,a.jsx)("div",{className:"text-sm max-h-64 overflow-y-auto",children:t.map((e,t)=>(0,a.jsx)("div",{className:"text-gray-300",children:e},t))})})]})})})})}var eu=r(6671);function em(){var e;let{showUsernameDialog:t,setShowUsernameDialog:r,usernameError:n,setUsernameError:l,isConnecting:i,setIsConnecting:o}=function(){let[e,t]=(0,s.useState)(!0),[r,a]=(0,s.useState)(""),[n,l]=(0,s.useState)(!1);return{showUsernameDialog:e,setShowUsernameDialog:t,usernameError:r,setUsernameError:a,isConnecting:n,setIsConnecting:l}}(),{userId:c,setUserId:f,username:p,setUsername:v,isHost:b,setIsHost:j}=function(){let[e,t]=(0,s.useState)(""),[r,a]=(0,s.useState)(""),[n,l]=(0,s.useState)(!1);return{userId:e,setUserId:t,username:r,setUsername:a,isHost:n,setIsHost:l}}(),{onlineUsers:k,setOnlineUsers:_}=function(){let[e,t]=(0,s.useState)([]);return{onlineUsers:e,setOnlineUsers:t}}(),{gameState:y,setGameState:N}=function(){let[e,t]=(0,s.useState)(null);return{gameState:e,setGameState:t}}(),{messages:w,addMessage:S}=function(){let[e,t]=(0,s.useState)([]);return{messages:e,addMessage:(0,s.useCallback)(e=>{t(t=>[...t.slice(-20),e])},[])}}(),{playerLastCalls:E,setPlayerLastCalls:A}=function(){let[e,t]=(0,s.useState)({});return{playerLastCalls:e,setPlayerLastCalls:t}}(),{yourCards:R,setYourCards:T,previousRoundHands:L,setPreviousRoundHands:F,currentRoundHands:D,setCurrentRoundHands:U}=function(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)({}),[n,l]=(0,s.useState)({});return{yourCards:e,setYourCards:t,previousRoundHands:r,setPreviousRoundHands:a,currentRoundHands:n,setCurrentRoundHands:l}}(),{isConnected:P,connectionError:O,connect:W,disconnect:G,sendMessage:H,addMessageHandler:I}=function(e){let[t,r]=(0,s.useState)(!1),[a,n]=(0,s.useState)(null),l=(0,s.useRef)(null),i=(0,s.useRef)(new Map),o=(0,s.useCallback)(()=>new Promise((t,a)=>{try{let s=new WebSocket(e);s.onopen=()=>{r(!0),n(null),console.log("Connected to WebSocket server"),t(s)},s.onclose=()=>{r(!1),console.log("Disconnected from WebSocket server")},s.onerror=e=>{n("Connection failed"),console.error("WebSocket error:",e),a(e)},s.onmessage=e=>{try{let t=JSON.parse(e.data),r=i.current.get(t.type);r&&r(t.data)}catch(e){console.error("Error parsing message:",e)}},l.current=s}catch(e){n("Failed to create WebSocket connection"),console.error("WebSocket connection error:",e),a(e)}}),[e]),c=(0,s.useCallback)(()=>{l.current&&(l.current.close(),l.current=null)},[]),d=(0,s.useCallback)((e,t)=>{l.current&&l.current.readyState===WebSocket.OPEN&&l.current.send(JSON.stringify({type:e,data:t}))},[]),u=(0,s.useCallback)((e,t)=>{i.current.set(e,t)},[]),m=(0,s.useCallback)(e=>{i.current.delete(e)},[]);return(0,s.useEffect)(()=>()=>{c()},[c]),{isConnected:t,connectionError:a,connect:o,disconnect:c,sendMessage:d,addMessageHandler:u,removeMessageHandler:m}}("wss://online-trading-card-game-production.up.railway.app");(0,s.useEffect)(()=>{I(B.USER_JOIN,e=>{e.success?(f(e.user_id),v(e.username),j(e.is_host||!1),r(!1),l(""),S(e.message||"Joined game successfully"),e.is_host&&S("You are the host!")):l(e.message||"Failed to join game"),o(!1)}),I(B.USERNAME_ERROR,e=>{l(e.message||"Username error"),o(!1)}),I(B.GAME_STATE_UPDATE,e=>{var t,r,a,s;N(e.game_state),_(e.online_users||[]),e.current_round_cards&&e.current_round_cards.length>0?U(e.current_round_cards.reduce((e,t)=>(e[t.user_id]=t.cards,e),{})):U({});let n=null==(t=e.game_state)?void 0:t.current_call;(null==n?void 0:n.player_id)&&(null==n?void 0:n.hand)&&(A(e=>({...e,[n.player_id]:n.hand})),S("".concat(null==(s=e.game_state)||null==(a=s.players.find(e=>e.user_id===n.player_id))?void 0:a.username," called ").concat(n.hand))),(null==(r=e.game_state)?void 0:r.phase)!=="playing"&&(A({}),T([]),U({}))}),I(B.PLAYER_UPDATE,e=>{void 0!==e.your_cards&&T(e.your_cards)}),I(B.GAME_START,()=>{S("Game started!"),A({}),F({}),T([])}),I(B.GAME_RESTART,()=>{S("Game restarted!"),A({}),F({}),T([])}),I(B.HOST_CHANGED,e=>{let t=e.new_host||"",r=e.host_id;j(r===c),S("New host: ".concat(t)),r===c&&S("You are now the host!")}),I(B.USER_KICKED,e=>{S(e.message||"You were kicked from the game"),G()}),I(B.USER_LEAVE,e=>{let t=e.username||"";S("".concat(t," has left the game"))}),I(B.WAITING_FOR_GAME,e=>{S(e.message||"Please wait for the next game"),T([])}),I(B.ROUND_START,e=>{let t=e.round_number;A({}),S("---"),S("Round ".concat(t," has started"))}),I(B.SHOW_CARDS,()=>{S("Revealing cards to all players")}),I(B.CALL_BLUFF,e=>{console.dir(e),e.loser.is_eliminated||0==e.loser.card_count?(0,eu.oR)("Player ".concat(e.loser.username," such a FAILUREEEE !")):(0,eu.oR)("Player ".concat(e.loser.username," STOOPID ").concat(e.loser.card_count-1," times")),S(e.message||"Bluff called"),e.previous_round_cards&&e.previous_round_cards.length>0?F(e.previous_round_cards.reduce((e,t)=>(e[t.user_id]=t.cards,e),{})):F({})}),I(B.ERROR,e=>{S("Error: ".concat(e.message||"Unknown error"))})},[I,c,G,S]);let K=(0,s.useCallback)(async e=>{o(!0),l(""),P||await W(),H(B.USER_JOIN,{username:e})},[P,W,H]),M=(null==y?void 0:y.phase)==="playing"&&(null==y?void 0:y.current_player_id)===c,z=null==y||null==(e=y.current_call)?void 0:e.hand;return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-900 text-green-400 p-6 font-mono",children:[(0,a.jsx)(C,{isOpen:t,onSubmit:K,error:n,isConnecting:i}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-2xl text-green-400 flex items-center justify-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-6 w-6"}),(0,a.jsx)(h.A,{className:"h-6 w-6"}),"Online Card Game",(0,a.jsx)(g.A,{className:"h-6 w-6"}),(0,a.jsx)(x.A,{className:"h-6 w-6"})]}),O&&(0,a.jsx)(d,{className:"border-red-400/20 bg-red-900/20",children:(0,a.jsxs)(u,{className:"text-red-400",children:["Connection Error: ",O]})}),(0,a.jsx)(ee,{username:p,isHost:b,isConnected:P,gamePhase:null==y?void 0:y.phase}),(null==y?void 0:y.phase)==="playing"&&(0,a.jsx)(q,{onCallHand:e=>{H(B.CALL_HAND,{user_id:c,hand_spec:e})},onCallBluff:()=>{H(B.CALL_BLUFF,{user_id:c})},isYourTurn:M,currentCall:z}),(0,a.jsx)(en,{players:(null==y?void 0:y.players)||[],currentRoundHands:D,previousRoundHands:L,playerLastCalls:E,gamePhase:null==y?void 0:y.phase,currentPlayerId:null==y?void 0:y.current_player_id,currentUserId:c,yourCards:R,isHost:b,onKickPlayer:e=>{b&&H(B.KICK_USER,{host_id:c,target_username:e})}}),(0,a.jsx)(el,{isHost:b,phase:null==y?void 0:y.phase,onStart:()=>{H(B.GAME_START,{user_id:c})},onRestart:()=>{H(B.GAME_RESTART,{user_id:c})}}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(eo,{onlineUsers:k}),(0,a.jsx)(ec,{roundNumber:null==y?void 0:y.round_number,waitingPlayers:null==y?void 0:y.waiting_players_count})]}),(0,a.jsx)(ed,{messages:w})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[671,618,441,684,358],()=>t(2496)),_N_E=e.O()}]);